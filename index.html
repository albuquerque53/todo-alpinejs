<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Activities</title>

    <!-- TailwindCSS import -->
    <script defer src="https://cdn.tailwindcss.com"></script>

    <!-- AlpineJS import -->
    <script defer
        src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
</head>
<body class="bg-cyan-200 flex h-screen  justify-center">

    <main
        x-data="{
            activities: [],
            createActivity(name, date) {
                this.activities.push({
                    id: Math.random().toString(16).slice(2),
                    did: false,
                    name: name,
                    date: date
                })
            }
        }"
        class="m-5"
    >
        <form
            class="w-[500px] flex justify-center"
            x-data="{
                name: '',
                date: '',
                getCurrentDate() {
                    const currentDate = new Date();

                    const currentYear = currentDate.getFullYear();
                    const currentMonth = currentDate.getMonth() + 1; // Months are zero-based, so add 1
                    const currentDay = currentDate.getDate();
                    
                    return `${currentYear}-${String(currentMonth).padStart(2, '0')}-${String(currentDay).padStart(2, '0')}`;
                }
            }"
            x-init="date = getCurrentDate()"
        >
            <input
                type="text"
                placeholder="Activity name"
                x-model="name"
                class="p-2 rounded mr-2 text-slate-800"
            />

            <input
                type="date"
                x-model="date"
                class="p-2 rounded mr-2"
            />

            <button
                x-on:click.prevent="createActivity(name, date); name = ''"
                class="p-2 bg-white rounded"
            >
                Create
            </button>
        </form>

        <section class="mt-5">
            <template x-for="activity in activities" :key="activity.id">
                <article
                    class="w-[500px] flex bg-white rounded border border-shadow p-3 cursor-pointer"
                    x-on:click="activity.did = ! activity.did"
                >

                    <input
                        type="checkbox"
                        class="mr-2 flex-none"
                        x-model="activity.did"
                    >
                    <h2
                        x-text="activity.name"
                        class="flex-1"
                        x-bind:class="{
                            'line-through': activity.did,
                            'text-slate-400': activity.did
                        }"
                    ></h2>
                    <span
                        x-text="activity.date"
                        class="text-sm align-self-end"
                        x-bind:class="{
                            'line-through': activity.did,
                            'text-slate-400': activity.did
                        }"
                    ></span>

                </article>
            </template>
        </section>
    </main>
        
</body>
</html>
